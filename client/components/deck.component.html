<div [formGroup]="form">
    <h2 *ngIf="!hideTitle">
        <div class="deck-metadata">added {{utils.formatDate(deck.dateAdded)}} by {{deck.userId || "~magic~"}}</div>
        <a class="deck-title" routerLink="/deck/{{deck.id}}">
            <span>{{title}}</span>
        </a>
        <span class="label label-default" *ngIf="deck.collected">collected</span>
        <span class="label label-warning" *ngIf="deck.deleted">deleted</span>
    </h2>

    <div *ngIf="auth" class="checkbox">
        <label>
            <input type="checkbox" id="blankCheckbox" formControlName="userCollection">
            Include in personal collection
        </label>
    </div>
    <button (click)="hideDetails = !hideDetails" class="btn btn-default btn-xs">{{hideDetails ? "Show" : "Hide"}} cards</button>
    <span *ngIf="!hideDetails">
        <button *ngIf="auth" (click)="changeAvailability()" class="btn btn-default btn-xs">
            {{filter.hideAvailable ? "Show all" : "Hide available"}} cards
        </button>
        <div class="btn-group" dropdown (click)="$event.preventDefault()">
            <button dropdownToggle class="btn btn-default btn-xs dropdown-toggle" type="button" >
            Sort: <i>{{sortOptions[filter.sort]}}</i> <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" dropdownMenu>
                <li><a href="#" (click)="changeSort(sortOptions.classic)">Classic</a></li>
                <li><a href="#" (click)="changeSort(sortOptions.expense)">Expense</a></li>
            </ul>
        </div>
        <!--<select id="orderBy" class="form-control input-xs" formControlName="orderBy">
            <option value="{{sortOptions.classic}}">Classic sort</option>
            <option value="{{sortOptions.expense}}">Expense sort</option>
        </select>-->
    </span>

    <div *ngIf="!hideDetails">
        <div class="card-details">
            <card *ngFor="let card of deck.cards | cardpipe: filter" [card]="card" [showCount]="true"></card>
        </div>
    </div>
</div>